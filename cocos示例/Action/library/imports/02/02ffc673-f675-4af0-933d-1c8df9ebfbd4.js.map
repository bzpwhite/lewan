{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\CircleAction.js"],"names":["circleMoveAction","cc","Class","name","extends","ActionInterval","ctor","duration","center","scale","angle","centerPos","v2","currentScale","scaleDiff","initWithDuration","update","dt","_computeEaseTime","newPos","nodeInitialPos","sub","rotateSelf","Math","PI","addSelf","target","setPosition","prototype","call","startWithTarget","getPosition","stop"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,mBAAmBC,GAAGC,KAAH,CAAS;AAC5BC,UAAM,qBADsB;AAE5BC,aAASH,GAAGI,cAFgB;;AAI5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,UAAK,cAASC,QAAT,EAAkBC,MAAlB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAsC;AACvC;AACA;;AAEA,aAAKC,SAAL,GAAiBV,GAAGW,EAAH,CAAM,CAAN,EAAS,CAAT,CAAjB;AACA,aAAKC,YAAL,GAAoB,GAApB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKJ,KAAL,GAAa,CAAb;;AAEA,aAAKK,gBAAL,CAAsBR,QAAtB,EAAgCC,MAAhC,EAAwCC,KAAxC,EAA+CC,KAA/C;AAEH,KAvB2B;AAwB5BM,YAAO,gBAASC,EAAT,EAAY;AACfA,aAAK,KAAKC,gBAAL,CAAsBD,EAAtB,CAAL;AACA;AACA,aAAKJ,YAAL,IAAqB,KAAKC,SAA1B;;AAEA;AACA;AACA,YAAIK,SAAS,KAAKC,cAAL,CAAoBC,GAApB,CAAwB,KAAKV,SAA7B,CAAb;AACAQ,eAAOG,UAAP,CAAkB,KAAKZ,KAAL,GAAaO,EAAb,GAAkB,GAAlB,GAAwBM,KAAKC,EAA/C;AACAL,eAAOM,OAAP,CAAe,KAAKd,SAApB;;AAEA,aAAKe,MAAL,CAAYC,WAAZ,CAAwBR,MAAxB;AACH,KApC2B;AAqC5BJ,sBAAiB,0BAASR,QAAT,EAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,KAAlC,EAAwC;AACrD,YAAIT,GAAGI,cAAH,CAAkBuB,SAAlB,CAA4Bb,gBAA5B,CAA6Cc,IAA7C,CAAkD,IAAlD,EAAwDtB,QAAxD,CAAJ,EAAuE;AACnE,iBAAKI,SAAL,GAAiBH,MAAjB;AACA,iBAAKM,SAAL,GAAiBL,KAAjB;AACA,iBAAKC,KAAL,GAAaA,KAAb;AACA,iBAAKG,YAAL,GAAoB,GAApB;;AAEA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KA/C2B;AAgD5BiB,qBAAgB,yBAASJ,MAAT,EAAgB;AAC5BzB,WAAGI,cAAH,CAAkBuB,SAAlB,CAA4BE,eAA5B,CAA4CD,IAA5C,CAAiD,IAAjD,EAAuDH,MAAvD;AACA,aAAKN,cAAL,GAAoBM,OAAOK,WAAP,EAApB;AACH,KAnD2B;AAoD5BC,UAAK,gBAAU;AACX;AACH;AAtD2B,CAAT,CAAvB;AAwDA;;;;;;;;AAQA/B,GAAGD,gBAAH,GAAsB,UAASO,QAAT,EAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,KAAlC,EAAwC;AAC1D,WAAO,IAAIV,gBAAJ,CAAqBO,QAArB,EAA+BC,MAA/B,EAAuCC,KAAvC,EAA8CC,KAA9C,CAAP;AACH,CAFD;;AAWA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CircleAction.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\r\n * 自定义抖动动作\r\n */\r\nvar circleMoveAction = cc.Class({\r\n    name: \"cc.circleMoveAction\",\r\n    extends: cc.ActionInterval,\r\n\r\n    // //圆心位置\r\n    // centerPos: cc.v2(0, 0),\r\n    // //当前运动缩放\r\n    // currentScale: 1.0,\r\n    // //运动缩放\r\n    // scaleDiff:0,\r\n    // //角度\r\n    // angle: 0,\r\n    ctor:function(duration,center,scale, angle){\r\n        // cc.ActionInterval.prototype.ctor.call(this);\r\n        // this.duration = duration;\r\n\r\n        this.centerPos = cc.v2(0, 0);\r\n        this.currentScale = 1.0;\r\n        this.scaleDiff = 0;\r\n        this.angle = 0;\r\n\r\n        this.initWithDuration(duration, center, scale, angle);\r\n\r\n    },\r\n    update:function(dt){\r\n        dt = this._computeEaseTime(dt);\r\n        // console.log(dt);\r\n        this.currentScale += this.scaleDiff;\r\n\r\n        // var newPos = cc.pRotateByAngle(this.nodeInitialPos, this.centerPos, this.angle * dt / 180 * Math.PI);\r\n        // var newPos = this.nodeInitialPos.rotate(this.angle * dt / 180 * Math.PI, this.centerPos);\r\n        var newPos = this.nodeInitialPos.sub(this.centerPos);\r\n        newPos.rotateSelf(this.angle * dt / 180 * Math.PI);\r\n        newPos.addSelf(this.centerPos);\r\n\r\n        this.target.setPosition(newPos);\r\n    },\r\n    initWithDuration:function(duration, center, scale, angle){\r\n        if (cc.ActionInterval.prototype.initWithDuration.call(this, duration)) {\r\n            this.centerPos = center;\r\n            this.scaleDiff = scale;\r\n            this.angle = angle;\r\n            this.currentScale = 1.0;\r\n\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    startWithTarget:function(target){\r\n        cc.ActionInterval.prototype.startWithTarget.call(this, target);\r\n        this.nodeInitialPos=target.getPosition();\r\n    },\r\n    stop:function(){\r\n        //this.target.setPosition(this.nodeInitialPos);\r\n    }\r\n});\r\n/**\r\n * 自定义圆周运动动作\r\n * @param {float}duration 抖动时间\r\n * @param {number}center 圆心\r\n * @param {number}scale 每帧差值\r\n * @param {number}angle 运动角度\r\n * @returns {Shake}\r\n */\r\ncc.circleMoveAction = function(duration, center, scale, angle){\r\n    return new circleMoveAction(duration, center, scale, angle);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// cc.MoveBy = cc.Class({\r\n//     name: 'cc.MoveBy',\r\n//     extends: cc.ActionInterval,\r\n\r\n//     ctor:function (duration, deltaPos, deltaY) {\r\n//         this._positionDelta = cc.v2(0, 0);\r\n//         this._startPosition = cc.v2(0, 0);\r\n//         this._previousPosition = cc.v2(0, 0);\r\n\r\n//         deltaPos !== undefined && cc.MoveBy.prototype.initWithDuration.call(this, duration, deltaPos, deltaY);\t\r\n//     },\r\n\r\n//     /*\r\n//      * Initializes the action.\r\n//      * @param {Number} duration duration in seconds\r\n//      * @param {Vec2} position\r\n//      * @param {Number} [y]\r\n//      * @return {Boolean}\r\n//      */\r\n//     initWithDuration:function (duration, position, y) {\r\n//         if (cc.ActionInterval.prototype.initWithDuration.call(this, duration)) {\r\n// \t        if(position.x !== undefined) {\r\n// \t\t        y = position.y;\r\n// \t\t        position = position.x;\r\n// \t        }\r\n\r\n//             this._positionDelta.x = position;\r\n//             this._positionDelta.y = y;\r\n//             return true;\r\n//         }\r\n//         return false;\r\n//     },\r\n\r\n//     clone:function () {\r\n//         var action = new cc.MoveBy();\r\n//         this._cloneDecoration(action);\r\n//         action.initWithDuration(this._duration, this._positionDelta);\r\n//         return action;\r\n//     },\r\n\r\n//     startWithTarget:function (target) {\r\n//         cc.ActionInterval.prototype.startWithTarget.call(this, target);\r\n//         var locPosX = target.x;\r\n//         var locPosY = target.y;\r\n//         this._previousPosition.x = locPosX;\r\n//         this._previousPosition.y = locPosY;\r\n//         this._startPosition.x = locPosX;\r\n//         this._startPosition.y = locPosY;\r\n//     },\r\n\r\n//     update:function (dt) {\r\n//         dt = this._computeEaseTime(dt);\r\n//         if (this.target) {\r\n//             var x = this._positionDelta.x * dt;\r\n//             var y = this._positionDelta.y * dt;\r\n//             var locStartPosition = this._startPosition;\r\n//             if (cc.macro.ENABLE_STACKABLE_ACTIONS) {\r\n//                 var targetX = this.target.x;\r\n//                 var targetY = this.target.y;\r\n//                 var locPreviousPosition = this._previousPosition;\r\n\r\n//                 locStartPosition.x = locStartPosition.x + targetX - locPreviousPosition.x;\r\n//                 locStartPosition.y = locStartPosition.y + targetY - locPreviousPosition.y;\r\n//                 x = x + locStartPosition.x;\r\n//                 y = y + locStartPosition.y;\r\n// \t            locPreviousPosition.x = x;\r\n// \t            locPreviousPosition.y = y;\r\n// \t            this.target.setPosition(x, y);\r\n//             } else {\r\n//                 this.target.setPosition(locStartPosition.x + x, locStartPosition.y + y);\r\n//             }\r\n//         }\r\n//     },\r\n\r\n//     reverse:function () {\r\n//         var action = new cc.MoveBy(this._duration, cc.v2(-this._positionDelta.x, -this._positionDelta.y));\r\n//         this._cloneDecoration(action);\r\n//         this._reverseEaseList(action);\r\n//         return action;\r\n//     }\r\n// });\r\n"]}