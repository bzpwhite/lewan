window.__require=function e(t,n,r){function o(s,i){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!i&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){return o(t[s][1][e]||e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<r.length;s++)o(r[s]);return o}({"ald-game-conf":[function(e,t,n){"use strict";cc._RF.push(t,"61935+t9v5FgZggRXnpdr0B","ald-game-conf"),n.app_key="778fe3a3df9f2fad46f85b885ed9ec7b",n.getLocation=!1,cc._RF.pop()},{}],"ald-game":[function(e,t,n){"use strict";cc._RF.push(t,"43e03HN0XZJTq6Eh5UE5yqk","ald-game");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var t,n,o,a,s,i,c,u,f,l,d,h,p,g,y,m,_,v,w,S,x,A;cc.sys.platform===cc.sys.WECHAT_GAME&&function(){var b=function(e,r){var i=0;(function h(){l++,e.as=g,e.at=p,e.rq_c=l,e.ifo=a,e.ak=o.app_key,e.uu=s,e.v=t,e.st=Date.now(),e.ev=r,e.wsr=d,e.ufo=q(e.ufo),e.ec=f,wx.request({url:"https://"+n+".aldwx.com/d.html",data:e,header:{se:c||"",op:u||"",img:_||""},method:"GET",fail:function(){i<2&&(i++,e.retryTimes=i,h())}})})()},q=function(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t},I=function(e){var t={};for(var n in e)t[n]=e[n];return t},C=function(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t};for(t="1.0.0",n="glog",""===(o=e("./ald-game-conf")).app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),o.app_key=o.app_key.replace(/\s/g,""),wx.request({url:"https://"+n+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=t&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}}),a="",s=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)a=!1;else{e=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}(),a=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),i={},c="",u="",f=0,l="",d=wx.getLaunchOptionsSync(),h=Date.now(),p=""+Date.now()+Math.floor(1e7*Math.random()),g=""+Date.now()+Math.floor(1e7*Math.random()),y=0,m="",_="",v=!0,w=["aldSendEvent","aldOnShareAppMeassage","aldShareAppMessage","aldSendSession","aldSendOpenid"],Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){_=C(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){o.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(i.lat=e[2].latitude||"",i.lng=e[2].longitude||"",i.spd=e[2].speed||""):(i.lat="",i.lng="",i.spd=""),""!==e[1]?i.nt=e[1].networkType||"":i.nt="";var t=I(i);""!==e[0]&&(t.ufo=e[0],m=e[0]),b(t,"init")}),wx.onShow(function(e){d=e,y=Date.now(),v||(p=""+Date.now()+Math.floor(1e7*Math.random()),a=!1,wx.setStorageSync("ald_ifo",!1)),v=!1;var t=I(i);I(i);var n=I(i);t.sm=y-h,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==d.scene?wx.getShareInfo({shareTicket:d.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,b(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",b(n,"event")),b(t,"show")}),wx.onHide(function(){var e=I(i);e.dr=Date.now()-y,""===m?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,m=t,_=C(t.userInfo.avatarUrl.split("/")),b(e,"hide")}}):b(e,"hide")}}):b(e,"hide")}),wx.onError(function(e){var t=I(i);t.tp="ald_error_message",t.ct=e,f++,b(t,"event")}),S={aldSendEvent:function(e,t){var n=I(i);""!==e&&"string"==typeof e&&e.length<=255?(n.tp=e,"string"==typeof t&&t.length<=255?(n.ct=String(t),b(n,"event")):"object"==(void 0===t?"undefined":r(t))?(JSON.stringify(t).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),n.ct=JSON.stringify(t),b(n,"event")):void 0===t||""===t?b(n,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMeassage:function(e){wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.onShareAppMessage(function(){var t,n=e();t=void 0!==d.query.ald_share_src?void 0!==n.query?(d.query.ald_share_src.indexOf(s),n.query+"&ald_share_src="+d.query.ald_share_src+","+s):(d.query.ald_share_src.indexOf(s),"ald_share_src="+d.query.ald_share_src+","+s):void 0!==n.query?n.query+"&ald_share_src="+s:"ald_share_src="+s,n.query=t;var r=I(i);return r.ct=n,r.tp="ald_share_status",b(r,"event"),n})}})},aldShareAppMessage:function(e){var t,n=e;t=void 0!==d.query.ald_share_src?void 0!==n.query?(d.query.ald_share_src.indexOf(s),n.query+"&ald_share_src="+d.query.ald_share_src+","+s):(d.query.ald_share_src.indexOf(s),"ald_share_src="+d.query.ald_share_src+","+s):void 0!==n.query?n.query+"&ald_share_src="+s:"ald_share_src="+s,n.query=t;var r=I(i);r.ct=n,r.tp="ald_share_status",b(r,"event"),wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.shareAppMessage(n)}})},aldSendSession:function(e){if(""!==e&&e){var t=I(i);t.tp="session",t.ct="session",c=e,""===m?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,b(t,"event")}}):b(t,"event")}}):(t.ufo=m,""!==m&&(t.gid=""),b(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){u=e;var t=I(i);t.tp="openid",t.ct="openid",b(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}},x=0;x<w.length;x++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(w[x],S[w[x]]);try{A=wx.getSystemInfoSync(),i.br=A.brand||"",i.md=A.model,i.pr=A.pixelRatio,i.sw=A.screenWidth,i.sh=A.screenHeight,i.ww=A.windowWidth,i.wh=A.windowHeight,i.lang=A.language,i.wv=A.version,i.sv=A.system,i.wvv=A.platform,i.fs=A.fontSizeSetting,i.wsdk=A.SDKVersion,i.bh=A.benchmarkLevel||"",i.bt=A.battery||"",i.wf=A.wifiSignal||"",i.lng="",i.lat="",i.nt="",i.spd="",i.ufo=""}catch(e){}}()}(),cc._RF.pop()},{"./ald-game-conf":"ald-game-conf"}],demo:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","demo"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getSystemInfo({success:function(e){console.log(e),sdk.WeChatLogin({buttonConfig:{type:"image",image:"https://laixiao.github.io/lewan/html/img/btn_start.png",style:{width:382,height:164,top:e.screenHeight/2-82,left:e.screenWidth/2-191}}},function(e){console.log("\u767b\u9646\u72b6\u6001\uff1a",e)})}})},start:function(){},update:function(e){}}),cc._RF.pop()},{}],md5:[function(e,t,n){"use strict";cc._RF.push(t,"4f8f8ZF8ctFMI9wDiGvzRNn","md5");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,r,o,a,s){return n(function(e,t){return e<<t|e>>>32-t}(n(n(t,e),n(o,s)),a),r)}function a(e,t,n,r,a,s,i){return o(t&n|~t&r,e,t,a,s,i)}function s(e,t,n,r,a,s,i){return o(t&r|n&~r,e,t,a,s,i)}function i(e,t,n,r,a,s,i){return o(t^n^r,e,t,a,s,i)}function c(e,t,n,r,a,s,i){return o(n^(t|~r),e,t,a,s,i)}function u(e,t){var r,o,u,f,l;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var d=1732584193,h=-271733879,p=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)o=d,u=h,f=p,l=g,h=c(h=c(h=c(h=c(h=i(h=i(h=i(h=i(h=s(h=s(h=s(h=s(h=a(h=a(h=a(h=a(h,p=a(p,g=a(g,d=a(d,h,p,g,e[r],7,-680876936),h,p,e[r+1],12,-389564586),d,h,e[r+2],17,606105819),g,d,e[r+3],22,-1044525330),p=a(p,g=a(g,d=a(d,h,p,g,e[r+4],7,-176418897),h,p,e[r+5],12,1200080426),d,h,e[r+6],17,-1473231341),g,d,e[r+7],22,-45705983),p=a(p,g=a(g,d=a(d,h,p,g,e[r+8],7,1770035416),h,p,e[r+9],12,-1958414417),d,h,e[r+10],17,-42063),g,d,e[r+11],22,-1990404162),p=a(p,g=a(g,d=a(d,h,p,g,e[r+12],7,1804603682),h,p,e[r+13],12,-40341101),d,h,e[r+14],17,-1502002290),g,d,e[r+15],22,1236535329),p=s(p,g=s(g,d=s(d,h,p,g,e[r+1],5,-165796510),h,p,e[r+6],9,-1069501632),d,h,e[r+11],14,643717713),g,d,e[r],20,-373897302),p=s(p,g=s(g,d=s(d,h,p,g,e[r+5],5,-701558691),h,p,e[r+10],9,38016083),d,h,e[r+15],14,-660478335),g,d,e[r+4],20,-405537848),p=s(p,g=s(g,d=s(d,h,p,g,e[r+9],5,568446438),h,p,e[r+14],9,-1019803690),d,h,e[r+3],14,-187363961),g,d,e[r+8],20,1163531501),p=s(p,g=s(g,d=s(d,h,p,g,e[r+13],5,-1444681467),h,p,e[r+2],9,-51403784),d,h,e[r+7],14,1735328473),g,d,e[r+12],20,-1926607734),p=i(p,g=i(g,d=i(d,h,p,g,e[r+5],4,-378558),h,p,e[r+8],11,-2022574463),d,h,e[r+11],16,1839030562),g,d,e[r+14],23,-35309556),p=i(p,g=i(g,d=i(d,h,p,g,e[r+1],4,-1530992060),h,p,e[r+4],11,1272893353),d,h,e[r+7],16,-155497632),g,d,e[r+10],23,-1094730640),p=i(p,g=i(g,d=i(d,h,p,g,e[r+13],4,681279174),h,p,e[r],11,-358537222),d,h,e[r+3],16,-722521979),g,d,e[r+6],23,76029189),p=i(p,g=i(g,d=i(d,h,p,g,e[r+9],4,-640364487),h,p,e[r+12],11,-421815835),d,h,e[r+15],16,530742520),g,d,e[r+2],23,-995338651),p=c(p,g=c(g,d=c(d,h,p,g,e[r],6,-198630844),h,p,e[r+7],10,1126891415),d,h,e[r+14],15,-1416354905),g,d,e[r+5],21,-57434055),p=c(p,g=c(g,d=c(d,h,p,g,e[r+12],6,1700485571),h,p,e[r+3],10,-1894986606),d,h,e[r+10],15,-1051523),g,d,e[r+1],21,-2054922799),p=c(p,g=c(g,d=c(d,h,p,g,e[r+8],6,1873313359),h,p,e[r+15],10,-30611744),d,h,e[r+6],15,-1560198380),g,d,e[r+13],21,1309151649),p=c(p,g=c(g,d=c(d,h,p,g,e[r+4],6,-145523070),h,p,e[r+11],10,-1120210379),d,h,e[r+2],15,718787259),g,d,e[r+9],21,-343485551),d=n(d,o),h=n(h,u),p=n(p,f),g=n(g,l);return[d,h,p,g]}function f(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function h(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return f(u(l(e),8*e.length))}(h(e))}function g(e,t){return function(e,t){var n,r,o=l(e),a=[],s=[];for(a[15]=s[15]=void 0,o.length>16&&(o=u(o,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],s[n]=1549556828^o[n];return r=u(a.concat(l(t)),512+8*t.length),f(u(s.concat(r),640))}(h(e),h(t))}function y(e,t,n){return t?n?g(t,e):function(e,t){return d(g(e,t))}(t,e):n?p(e):function(e){return d(p(e))}(e)}"function"==typeof define&&define.amd?define(function(){return y}):"object"===(void 0===t?"undefined":r(t))&&t.exports?t.exports=y:e.md5=y})(void 0),cc._RF.pop()},{}],mta:[function(e,t,n){"use strict";cc._RF.push(t,"cc3adPZcURPDalQkPzJ20yh","mta");var r={app_id:"",event_id:"",api_base:"https://pingtas.qq.com/pingd",prefix:"_mta_",version:"1.3.5",stat_share_app:!1,stat_pull_down_fresh:!1,stat_reach_bottom:!1};function o(){try{var e="s"+a();return wx.setStorageSync(r.prefix+"ssid",e),e}catch(e){}}function a(e){for(var t=[0,1,2,3,4,5,6,7,8,9],n=10;1<n;n--){var r=Math.floor(10*Math.random()),o=t[r];t[r]=t[n-1],t[n-1]=o}for(n=r=0;5>n;n++)r=10*r+t[n];return(e||"")+(r+"")+ +new Date}function s(){var e={dm:"wechat.apps.xx",url:function(){try{var e=getCurrentPages(),t="/";return 0<e.length&&(t=e.pop().__route__),t}catch(e){console.log("get current page path error:"+e)}}(),pvi:"",si:"",ty:0};return e.pvi=function(){var t=function(){try{return wx.getStorageSync(r.prefix+"auid")}catch(e){}}();return t||(t=function(){try{var e=a();return wx.setStorageSync(r.prefix+"auid",e),e}catch(e){}}(),e.ty=1),t}(),e.si=function(){var e=function(){try{return wx.getStorageSync(r.prefix+"ssid")}catch(e){}}();return e||(e=o()),e}(),e}function i(){var e=function(){var e=wx.getSystemInfoSync();return{adt:encodeURIComponent(e.model),scl:e.pixelRatio,scr:e.windowWidth+"x"+e.windowHeight,lg:e.language,fl:e.version,jv:encodeURIComponent(e.system),tz:encodeURIComponent(e.platform)}}();return function(e){wx.getNetworkType({success:function(t){e(t.networkType)}})}(function(e){try{wx.setStorageSync(r.prefix+"ntdata",e)}catch(e){}}),e.ct=wx.getStorageSync(r.prefix+"ntdata")||"4g",e}function c(){var e,t=u.Data.userInfo,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);return t=n.join(";"),{r2:r.app_id,r4:"wx",ext:"v="+r.version+(null!==t&&""!==t?";ui="+encodeURIComponent(t):"")}}var u={App:{init:function(e){"appID"in e&&(r.app_id=e.appID),"eventID"in e&&(r.event_id=e.eventID),"statShareApp"in e&&(r.stat_share_app=e.statShareApp),"statPullDownFresh"in e&&(r.stat_pull_down_fresh=e.statPullDownFresh),"statReachBottom"in e&&(r.stat_reach_bottom=e.statReachBottom),o(),"lauchOpts"in e&&(u.Data.lanchInfo=e.lauchOpts,u.Data.lanchInfo.landing=1)}},Page:{init:function(){var e=getCurrentPages()[getCurrentPages().length-1];e.onShow&&function(){var t=e.onShow;e.onShow=function(){u.Page.stat(),t.call(this,arguments)}}(),r.stat_pull_down_fresh&&e.onPullDownRefresh&&function(){var t=e.onPullDownRefresh;e.onPullDownRefresh=function(){u.Event.stat(r.prefix+"pulldownfresh",{url:e.__route__}),t.call(this,arguments)}}(),r.stat_reach_bottom&&e.onReachBottom&&function(){var t=e.onReachBottom;e.onReachBottom=function(){u.Event.stat(r.prefix+"reachbottom",{url:e.__route__}),t.call(this,arguments)}}(),r.stat_share_app&&e.onShareAppMessage&&function(){var t=e.onShareAppMessage;e.onShareAppMessage=function(){return u.Event.stat(r.prefix+"shareapp",{url:e.__route__}),t.call(this,arguments)}}()},stat:function(){if(""!=r.app_id){var e=[],t=c(),n=[s(),t,i()];u.Data.lanchInfo&&(n.push({ht:u.Data.lanchInfo.scene,rdm:"/",rurl:u.Data.lanchInfo.path}),u.Data.lanchInfo.query&&u.Data.lanchInfo.query._mta_ref_id&&n.push({rarg:u.Data.lanchInfo.query._mta_ref_id}),1==u.Data.lanchInfo.landing&&(t.ext+=";lp=1",u.Data.lanchInfo.landing=0)),n.push({rand:+new Date}),t=0;for(var o=n.length;t<o;t++)for(var a in n[t])n[t].hasOwnProperty(a)&&e.push(a+"="+(void 0===n[t][a]?"":n[t][a]));wx.request({url:r.api_base+"?"+e.join("&").toLowerCase()})}}},Event:{stat:function(e,t){if(""!=r.event_id){var n=[],o=s(),a=c();o.dm="wxapps.click",o.url=e,a.r2=r.event_id;var u,f=void 0===t?{}:t,l=[];for(u in f)f.hasOwnProperty(u)&&l.push(encodeURIComponent(u)+"="+encodeURIComponent(f[u]));for(f=l.join(";"),a.r5=f,f=0,a=(o=[o,a,i(),{rand:+new Date}]).length;f<a;f++)for(var d in o[f])o[f].hasOwnProperty(d)&&n.push(d+"="+(void 0===o[f][d]?"":o[f][d]));wx.request({url:r.api_base+"?"+n.join("&").toLowerCase()})}}},Data:{userInfo:null,lanchInfo:null}};t.exports=u,cc._RF.pop()},{}],sdk_conf:[function(e,t,n){"use strict";cc._RF.push(t,"8b6879rSEBOcIqrwCWmk1vD","sdk_conf");t.exports={game:"test",version:"1.0.0",bannerAdUnitId:"",videoAdUnitId:""},cc._RF.pop()},{}],sdk:[function(e,t,n){"use strict";cc._RF.push(t,"ddad1pj1ZBB5pnxQ/yIyjRQ","sdk");var r=e("md5"),o=e("mta"),a=e("sdk_conf"),s=(e("ald-game"),{md5:r,mta:o,ip1:"https://login.llewan.com:1799",ip2:"https://game.llewan.com:1899",ip3:"https://log.llewan.com:1999",ip4:"https://res.llewan.com:2099",debug:!1,login:"/Login/common",Config:"/Config/common",ConfigData:{config1:{},config2:{}},Share:"/Share/common",ShareList:[],Logcommon:"/Log/common",BannerAd:null,VideoAd:null,userid:0,init:function(e,t){var n=this;if(e.debug&&(this.debug=e.debug),e.userid&&(this.userid=e.userid),cc.sys.platform===cc.sys.WECHAT_GAME){this.Get(this.ip2+this.Config,{},function(r){r&&1==r.c?(n.ConfigData=r.d,n.Get(n.ip2+n.Share,{},function(e){e&&1==e.c?n.ShareList=e.d:console.log("\u521d\u59cb\u5316\u5206\u4eab\u4fe1\u606f\u5931\u8d25\uff1a",e),t(!0)})):(n.debug&&console.log("\u540e\u53f0\u914d\u7f6e\u4fe1\u606f\u521d\u59cb\u5316\u5931\u8d25\uff0c\u518d\u6b21\u521d\u59cb\u5316\uff1a",r),n.init(e,t))});var r=wx.getLaunchOptionsSync();r.query.share_uid=r.query.uid,r.query.uid=this.userid,this.Get(this.ip3+this.Logcommon,{log_type:"ShareEnter",data:r},function(e){}),wx.onShow(function(e){e.query.uid&&(e.query.share_uid=e.query.uid,e.query.uid=n.userid,n.Get(n.ip3+n.Logcommon,{log_type:"ShareEnter",data:e},function(e){}))})}},getShareByWeight:function(e){if(this.ShareList.length>0){for(var t=[],n=0;n<this.ShareList.length;n++)e==this.ShareList[n].type&&(this.ShareList[n].weight=parseInt(this.ShareList[n].weight),t.push(this.ShareList[n]));var r=[];for(n=0;n<t.length;n++)for(var o=0;o<t[n].weight;o++)r.push(n);var a=t[n=r[parseInt(Math.random()*r.length)]];return-1!=a.title.indexOf("&nickName")&&(a.title=a.title.replace(/&nickName/g,this.getUser().nickName)),JSON.parse(JSON.stringify(a))}return null},onShareAppMessage:function(e){var t=this;cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(n){var r=0;e.type&&(r=e.type);var o=t.getShareByWeight(r);e.title&&(o.title=e.title),e.imageUrl&&(o.imageUrl=e.imageUrl),o.query?o.query+=e.query+"&share_id="+o.sysid+"&uid="+t.userid:e.query?o.query="share_id="+o.sysid+"&uid="+t.userid+"&"+e.query:o.query="share_id="+o.sysid+"&uid="+t.userid,e.success&&(o.success=e.success),e.fail&&(o.fail=e.fail);var a={uid:s.userid,share_id:o.sysid};return t.Get(t.ip3+t.Logcommon,{log_type:"ShareClick",data:a},function(e){}),o}))},shareAppMessage:function(e){var t=1;e.type&&(t=e.type);var n=this.getShareByWeight(t);if(e.title&&(n.title=e.title),e.imageUrl&&(n.imageUrl=e.imageUrl),n.query?n.query+=e.query+"&share_id="+n.sysid+"&uid="+this.userid:e.query?n.query="share_id="+n.sysid+"&uid="+this.userid+"&"+e.query:n.query="share_id="+n.sysid+"&uid="+this.userid,e.success&&(n.success=e.success),e.fail&&(n.fail=e.fail),console.log("====111======",n),cc.sys.platform===cc.sys.WECHAT_GAME){wx.shareAppMessage(n);var r={uid:s.userid,share_id:n.sysid};this.Get(this.ip3+this.Logcommon,{log_type:"ShareClick",data:r},function(e){})}},initmta:function(e){o.App.init(e)},setmta:function(e,t){cc.sys.platform===cc.sys.WECHAT_GAME&&o.Event.stat(e,{value:"true"})},setAld:function(e,t,n){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldSendEvent(v1,{v2:v3})},Get:function(e,t,n){var o=this;t.game=a.game,t.version=a.version;var s=(new Date).getTime();for(var i in t.ts=s,t.sign=r(s.toString().substr(0,4)+a.game.substr(0,2)+a.version.substr(0,1)+"$5dfjr$%dsadsfdsii"),e+="?",t)e+=i+"="+t[i]+"&";var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState)if(c.status>=200&&c.status<400){var t=c.responseText;if(t){var r=JSON.parse(t);n(r)}else o.debug&&console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728",e),n(null)}else o.debug&&console.log("\u8bf7\u6c42\u5931\u8d25",e),n(null)},c.open("GET",e,!0),c.send()},Post:function(e,t,n){var o=this;t.game=a.game,t.version=a.version;var s=(new Date).getTime();t.ts=s,t.sign=r(s.toString().substr(0,4)+a.game.substr(0,2)+a.version.substr(0,1)+"$5dfjr$%dsadsfdsii");var i="";for(var c in t)i+=c+"="+t[c]+"&";var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4==u.readyState)if(u.status>=200&&u.status<400){var e=u.responseText;if(e){var t=JSON.parse(e);n(t)}else o.debug&&console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),n(null)}else o.debug&&console.log("\u8bf7\u6c42\u5931\u8d25",u),n(null)},u.open("POST",e,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(i)},checkUpdate:function(){if(cc.sys.platform===cc.sys.WECHAT_GAME&&"function"==typeof wx.getUpdateManager){var e=wx.getUpdateManager();e.onCheckForUpdate(function(e){self.debug&&console.log("\u8bf7\u6c42\u5b8c\u65b0\u7248\u672c\u4fe1\u606f\u7684\u56de\u8c03",e.hasUpdate)}),e.onUpdateReady(function(){self.debug&&console.log("\u65b0\u7684\u7248\u672c\u5df2\u7ecf\u4e0b\u8f7d\u597d\uff0c\u8c03\u7528 applyUpdate \u5e94\u7528\u65b0\u7248\u672c\u5e76\u91cd\u542f"),e.applyUpdate()}),e.onUpdateFailed(function(){self.debug&&console.log("\u65b0\u7684\u7248\u672c\u4e0b\u8f7d\u5931\u8d25")})}},getConfig1:function(){return JSON.parse(this.ConfigData.config1)},getConfig2:function(){return JSON.parse(this.ConfigData.config2)},createImage:function(e,t){if(cc.sys.platform===cc.sys.WECHAT_GAME){var n=wx.createImage();n.onload=function(){var t=new cc.Texture2D;t.initWithElement(n),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)},n.src=t}},getUser:function(){var e=this.getItem("userinfo");return e||null},setItem:function(e,t){cc.sys.localStorage.setItem(e,t)},getItem:function(e){return cc.sys.localStorage.getItem(e)},onMessage:function(e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.onMessage(function(t){e(t)})},postMessage:function(e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.postMessage({message:e})},setUserCloudStorage:function(e,t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.setUserCloudStorage({KVDataList:e,success:function(e){t(e)},fail:function(e){t(e)}})},getUserCloudStorage:function(e,t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getUserCloudStorage({keyList:e,success:function(e){t(e)},fail:function(e){t(e)}})},getGroupCloudStorage:function(e,t,n){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getGroupCloudStorage({shareTicket:e,keyList:t,success:function(e){n(e)},fail:function(e){n(e)}})},getFriendCloudStorage:function(e,t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.getFriendCloudStorage({keyList:e,success:function(e){t(e)},fail:function(e){t(e)}})},sortList:function(e,t,n){return e.sort(function(e,r){for(var o=0,a=e.KVDataList,s=0;s<a.length;s++)a[s].key==t&&(o=a[s].value);var i=0;a=r.KVDataList;for(s=0;s<a.length;s++)a[s].key==t&&(i=a[s].value);return n?parseInt(o)-parseInt(i):parseInt(i)-parseInt(o)}),e},getMyRank3:function(e,t){for(var n=[],r=0;r<e.length;r++)if(e.length<=3){e[r].avatarUrl==t.avatarUrl&&e[r].nickname==t.nickName&&(e[r].isSelf=!0),n=e;for(r=0;r<n.length;r++)n[r].rank=r}else if(e[r].avatarUrl==t.avatarUrl&&e[r].nickname==t.nickName){e[r].isSelf=!0,r==e.length-1?(e[r].rank=r,e[r-1].rank=r-1,e[r-2].rank=r-2,n.push(e[r-2]),n.push(e[r-1]),n.push(e[r])):0==r?(e[r].rank=r,e[r+1].rank=r+1,e[r+2].rank=r+2,n.push(e[r]),n.push(e[r+1]),n.push(e[r+2])):(e[r-1].rank=r-1,e[r].rank=r,e[r+1].rank=r+1,n.push(e[r-1]),n.push(e[r]),n.push(e[r+1]));break}return n},WeChatLogin:function(e,t){var n=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){var r=wx.getLaunchOptionsSync(),o=r.query.uid,a=r.query.source_id,s=r.query.source_id2,i=r.query.share_id,c=this.getItem("userinfo");c?t(c):n.button?n.button.show():(n.button=wx.createUserInfoButton(e.buttonConfig),n.button.onTap(function(e){wx.showToast({title:"\u767b\u5f55\u4e2d...",icon:"loading",duration:8}),wx.getSetting({success:function(r){r.authSetting["scope.userInfo"]?(console.log("===\u5df2\u7ecf\u6388\u6743==="),wx.login({success:function(r){var c={code:r.code,rawData:e.rawData,iv:e.iv,encryptedData:e.encryptedData,signature:e.signature,referee_id:o,source_id:a,source_id2:s,share_id:i};console.log("==\u767b\u5f55\u53c2\u6570==",c),n.Post(n.ip1+n.login,c,function(e){console.log("==\u767b\u5f55\u7ed3\u679c==",e),1==e.c?(wx.hideToast(),n.setItem("userinfo",e.d),n.button.hide(),t(e.d)):(console.log("==\u767b\u5f55\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25==",e),wx.showToast({title:"\u767b\u5f55\u5931\u8d25\u8bf7\u91cd\u8bd5"}))})},fail:function(){wx.showToast({title:"\u767b\u5f55\u5931\u8d25\u8bf7\u91cd\u8bd5"}),t(!1)}})):t(!1)}})}),n.button.show())}},createBannerAd:function(e){if(cc.sys.platform===cc.sys.WECHAT_GAME)return this.BannerAd?this.BannerAd:(this.BannerAd=wx.createBannerAd({adUnitId:a.bannerAdUnitId,style:e.style}),this.BannerAd.onLoad(function(e){console.log("BannerAd\u5e7f\u544a\u52a0\u8f7d\u4e8b\u4ef6\uff1a",e)}),this.BannerAd.onError(function(e){console.log("BannerAd\u5e7f\u544a\u9519\u8bef\u4e8b\u4ef6\uff1a",e)}),this.BannerAd)},createRewardedVideoAd:function(){if(cc.sys.platform===cc.sys.WECHAT_GAME)return this.VideoAd?this.VideoAd:(this.VideoAd=wx.createRewardedVideoAd({adUnitId:a.videoAdUnitId}),this.VideoAd.onLoad(function(e){console.log("VideoAd\u5e7f\u544a\u52a0\u8f7d\u4e8b\u4ef6\uff1a",e)}),this.VideoAd.onError(function(e){console.log("VideoAd\u5e7f\u544a\u9519\u8bef\u4e8b\u4ef6\uff1a",e)}),this.VideoAd)},Screenshot:function(e,t){var n=this;wx.getSetting({success:function(r){r.authSetting["scope.writePhotosAlbum"]?n.capture(e,t):wx.authorize({scope:"scope.writePhotosAlbum",success:function(r){console.log("success res2",r),n.Screenshot(e,t)},fail:function(e){wx.showToast({title:"\u8bf7\u91cd\u65b0\u6388\u6743"}),t(null),console.log("fail res2",e)}})},fail:function(){t(null)}})},capture:function(e,t){var n=new cc.RenderTexture,r=cc.game._renderContext;n.initWithSize(cc.visibleRect.width,cc.visibleRect.height,r.STENCIL_INDEX8),e.targetTexture=n,this.texture=n;var o=this.texture.width,a=this.texture.height,s=document.createElement("canvas"),i=s.getContext("2d");s.width=o,s.height=a,e.render();for(var c=this.texture.readPixels(),u=4*o,f=0;f<a;f++){for(var l=a-1-f,d=i.createImageData(o,1),h=l*o*4,p=0;p<u;p++)d.data[p]=c[h+p];i.putImageData(d,0,f)}s.toDataURL("image/jpeg");var g=s.toTempFilePathSync({x:0,y:0,width:o,height:a,destWidth:o,destHeight:a});wx.saveImageToPhotosAlbum({filePath:g,success:function(e){console.log("==\u622a\u56fe\u4fdd\u5b58=success=",e),t(!0)},fail:function(e){console.log("==\u622a\u56fe\u4fdd\u5b58=fail=",e),t(null)}})}});window.sdk=s,cc._RF.pop()},{"ald-game":"ald-game",md5:"md5",mta:"mta",sdk_conf:"sdk_conf"}]},{},["demo","ald-game-conf","ald-game","md5","mta","sdk","sdk_conf"]);